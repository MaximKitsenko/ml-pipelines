{% extends "explore/base.html" %}
{% load filters %}

{% block content %}

<nav aria-label="breadcrumb">
  <ol class="breadcrumb  rounded-bottom" style="border-top-left-radius: 0; border-top-right-radius: 0;">
    <li class="breadcrumb-item"><a href="{% url "explore:projects" %}">Projects</a></li>
    <li class="breadcrumb-item"><a href="{% url "explore:view_project" dataset.project_id %}" class="project-link">{{ project.name }}</a></li>
    <li class="breadcrumb-item active" aria-current="page">{{ dataset.name }}</li>
  </ol>
</nav>


    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3">
        <h2>
            Dataset: {{ dataset.name }}
            {% if stale %} <span class="stale-status badge badge-warning">stale</span>{% endif %}
        </h2>
    </div>

    <div class="container" id="ds-{{ dataset.dataset_id }}">
        <div class="row rounded border px-4 py-3" >
            <div class="col">

                <div>
                    {% if dataset.storage_id_set %}
                        <strong>Storage: </strong><span class="storage-id">{{ dataset.storage_id }}</span><br/>
                    {% endif %}

                    {% if dataset.storage_location_set %}
                        <strong>Location: </strong><code>{{ dataset.storage_location }}</code><br/>
                    {% endif %}

                    <strong>Records: </strong>{{ dataset.record_count }}<br/>
                    <strong>Files: </strong> {{ dataset.file_count }}<br />
                    <strong>Size:</strong>  <span class="zip-size">{% if dataset.zip_bytes_set %}{{ dataset.zip_bytes|fmt_bytes }}{% else %}N/A{% endif %}</span><br/>

                    {% if dataset.data_format_set %}
                        <strong>Format:</strong> <span class="record-format">{{ dataset.data_format }}</span><br/>
                    {% endif %}

                    <strong>Last updated:</strong> <span class="last-updated">{% if dataset.update_timestamp_set %}{{ dataset.update_timestamp|fmt_timestamp }}{% else %}N/A{% endif %}</span><br/>
                </div>



            </div>
            <div class="col">
                {% if dataset.experts %}
                    <strong>Domain Experts: </strong>
                        {% for e in dataset.experts %}
                            {% if not forloop.first %}, {% endif %}<i>{{ e.expert_name }}</i>
                        {% endfor %}





                {% endif %}



            </div>

        </div>
        <div class="row pt-5">
            <div class="col">
                <h3>Relations</h3>
                {{  lineage | safe }}
            </div>
        </div>

    {% if dataset.description_set %}
        <div class="row pt-5">
        <div class="col">
            <h3>Description</h3>

            <article class="pt-2">
                {{ description|safe }}
            </article>

        </div>
        </div>


    {%  endif %}
    {% if dataset.sample_set %}
          <div class="row pt-5">
        <div class="col">
            <h3>Sample</h3>

            <pre class="alert alert-secondary"><code>{{ dataset.sample_body.decode }}</code></pre>

        </div>
          </div>
    {% endif %}



    </div>








{% endblock %}


