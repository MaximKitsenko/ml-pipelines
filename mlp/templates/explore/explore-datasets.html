{% extends "explore/base.html" %}
{% load filters %}

{% block content %}
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3">
        <h1 class="h2">Explore Datasets</h1>
    </div>





    {% if catalog_is_empty %}


        <div class="alert alert-info" role="alert" id="empty-catalog-message">
  <h4 class="alert-heading">Catalog is empty</h4>
  <p>This looks like a fresh install. Catalog currently contains no datasets. You can use client tools to add dataset information.</p>

</div>

    {% else %}


        <form action="{% url "explore:explore_datasets" %}" method="get">
<div class="input-group mb-3">
  <input type="text" class="form-control" placeholder="Search Datasets" aria-label="Search Datasets" aria-describedby="basic-addon2" name="query" value="{{ query }}">
  <div class="input-group-append">
      <input type="submit" value="Search" class="btn btn-outline-secondary">

  </div>
</div>

</form>





    <table class="table table-sm table-striped table-bordered" id="results">
    <thead>
        <tr>
            <th>Dataset</th>
            <th>Project</th>
            <th>Size</th>
            <th>Last Updated</th>



        </tr>
    </thead>
    <tbody>

    {% for ds, meta in datasets %}
        <tr class="dataset-info" id="ds-{{ ds.dataset_id }}">
            <td>
                <a href="{% url "explore:view_dataset" ds.dataset_id%} " class="dataset-name">{{ ds.name  }}</a>
                {% if meta.stale %} <span class="stale-status badge badge-warning">stale</span>{% endif %}

            </td>
            <td><a href="{% url "explore:view_project" ds.project_id %}" class="project-link">{{ meta.project_name }}</a> </td>
            <td class="raw-size">{{ ds.raw_bytes|fmt_bytes }}</td>
            <td class="update-timestamp">{% if ds.update_timestamp_set %}{{ ds.update_timestamp |fmt_timestamp }}{% endif %}</td>
        </tr>

    {% empty %}


        <tr class="table-info" >
            <td colspan="4">
                <em>No matching results</em>
            </td>
        </tr>


    {% endfor %}


     {% endif %}

    </tbody>
    </table>







{% endblock %}


